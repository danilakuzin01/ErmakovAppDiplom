@using ErmakovAppDiplom.Models.ViewModel
@model List<UserTableViewModel>;

@{
    ViewData["Title"] = "Пользователи";
}

<head>
    <link rel="stylesheet" href="~/css/user.css" asp-append-version="true" />
</head>

<div>
    <div class="user-container-wrapper">
        <div class="user-container-header">
            <div>
                <h3>
                    Пользователи
                </h3>
                <p>
                    Управление сотрудниками и их доступами
                </p>
            </div>
            <button class="add-user-button">

                <svg width="1rem" height="1rem" class="w-6 h-6 text-red-500">
                    <use href="#icon-plus"></use>
                </svg>
                Добавить сотрудника
            </button>
        </div>
        <div class="user-container-body">
            <div class="user-body-search-filter">
                <div class="search-container">
                    <svg width="1rem" height="1rem" class="w-6 h-6 text-red-500">
                        <use href="#icon-search"></use>
                    </svg>
                    <input />
                </div>
                <div style="display: flex; gap: .5rem;">
                    <div class="filter-status-button-container">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-filter h-4 w-4 text-gray-400" data-lov-id="src/pages/Equipment.tsx:419:16" data-lov-name="Filter" data-component-path="src/pages/Equipment.tsx" data-component-line="419" data-component-file="Equipment.tsx" data-component-name="Filter" data-component-content="%7B%22className%22%3A%22h-4%20w-4%20text-gray-400%22%7D"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>
                        <select class="types-select">
                            <option value="all">Все роли</option>
                            <option value="status1">Администраторы</option>
                            <option value="status2">Пользователи</option>
                        </select>
                    </div>
                    <select class="types-select">
                        <option value="all">Все отделы</option>
                        <option value="type1">Руководство</option>
                        <option value="type2">Бухгалтерия</option>
                    </select>
                </div>
            </div>
            <div style="width:100%">

                <div class="content">
                    <div class="equipment-tab-list">
                        <button class="task-tab-button active" data-tab="spisok" role="tab" aria-selected="true">Список</button>
                        <button class="task-tab-button" role="tab" data-tab="plitka">Плитка</button>
                    </div>
                    <div id="tabContents">
                        <div class="task-tab-content active" id="tab-spisok">
                            <table class="table-spisok">
                                <thead>
                                    <tr>
                                        <th>Сотрудник</th>
                                        <th>Должность</th>
                                        <th>Отдел</th>
                                        <th>Местоположение</th>
                                        <th>Статус</th>
                                        <th>Действия</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach(UserTableViewModel user in Model)
                                    {
                                        <tr>
                                            <td>
                                                <div style="display: flex; align-items: center">
                                                    <div style="width: 2.5rem; height: 2.5rem; flex-shrink: 0">
                                                        <span class="user-avatar">
                                                            <span style="align-items: center; width: 100%; height: 100%;justify-content: center; display: flex;">
                                                                @user.LastName[0]@user.FirstName[0]@user.SecondName[0]
                                                            </span>
                                                        </span>
                                                    </div>
                                                    <div style="margin-left: 1rem">
                                                        <div class="user-zagolovok">
                                                            @user.LastName @user.FirstName @user.SecondName
                                                        </div>
                                                        <div class="user-email">
                                                            @user.Email
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="user-zagolovok">
                                                    @user.PostName
                                                </div>
                                                <div class="user-role  @(user.Roles.First() == "Admin" ? "admin" : "user")">
                                                    @(user.Roles.First() == "Admin" ? "Администратор" : "Пользователь")
                                                </div>
                                            </td>
                                            <td>
                                                @user.SectionName
                                            </td>
                                            <td>
                                                <div class="user-zagolovok">
                                                    @user.LocationName
                                                </div>
                                                @user.SublocationName
                                            </td>
                                            <td>
                                                <span class="user-status @(user.IsActive ? "active" : "deactive")">
                                                    @(user.IsActive ? "Активен" : "Неактивен")
                                                </span>
                                            </td>
                                            <td>
                                                <button class="user-table-button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"></path><circle cx="12" cy="12" r="3"></circle></svg>
                                                </button>
                                                <button class="user-table-button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"></path><path d="m15 5 4 4"></path></svg>
                                                </button>
                                                <button class="user-table-button">
                                                    <svg class="icon-trash" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>
                                                </button>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>

                        <div class="task-tab-content" id="tab-plitka">
                            плитка
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@section Scripts {
    <script>
            document.querySelectorAll('.task-tab-button').forEach(button => {
            button.addEventListener('click', () => {
                // Снимаем активность со всех кнопок
                document.querySelectorAll('.task-tab-button').forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');

                // Меняем вкладку
                const tab = button.getAttribute('data-tab');

                document.querySelectorAll('.task-tab-content').forEach(content => {
                    content.classList.remove('active');
                });

                const activeTab = document.getElementById('tab-' + tab);
                if (activeTab) {
                    activeTab.classList.add('active');
                }
            });
        });

    </script>
}